## String to partially override chart.fullname template (will maintain the release name)
##
# nameOverride: ""

## String to fully override chart.fullname template
##
# fullnameOverride: ""

## List of namespaces to watch for resources.
##
watchNamespaces: [ ]

# Configure the controller manager deployment
##
manager:
    replicas: 1

    image:
        repository: ghcr.io/clickhouse/clickhouse-operator
        tag: v0.0.1
        pullPolicy: IfNotPresent

    ## Arguments
    ##
    args:
        - --leader-elect
        - --health-probe-bind-address=:8081

    ## Environment variables
    ##
    env: [ ]

    ## Image pull secrets
    ##
    imagePullSecrets: [ ]

    ## Pod-level security settings
    ##
    podSecurityContext:
        runAsNonRoot: true
        seccompProfile:
            type: RuntimeDefault

    ## Container-level security settings
    ##
    containerSecurityContext:
        allowPrivilegeEscalation: false
        capabilities:
            drop:
                - ALL
        readOnlyRootFilesystem: true

    ## Resource limits and requests
    ##
    resources:
        limits:
            cpu: 500m
            memory: 128Mi
        requests:
            cpu: 10m
            memory: 64Mi

    ## Manager pod's affinity
    ##
    affinity:
        nodeAffinity:
            requiredDuringSchedulingIgnoredDuringExecution:
                nodeSelectorTerms:
                    -   matchExpressions:
                            -   key: kubernetes.io/arch
                                operator: In
                                values:
                                    - amd64
                                    - arm64
                                    - ppc64le
                                    - s390x
                            -   key: kubernetes.io/os
                                operator: In
                                values:
                                    - linux

    ## Manager pod's node selector
    ##
    nodeSelector: { }

    ## Manager pod's tolerations
    ##
    tolerations: [ ]

    ## Manager pod's termination grace period seconds
    ##
    terminationGracePeriodSeconds: 10

## Helper RBAC roles for managing custom resources
##
rbacHelpers:
    # Install convenience admin/editor/viewer roles for CRDs
    enable: false

## Custom Resource Definitions
##
crd:
    # Install CRDs with the chart
    enable: true
    # Keep CRDs when uninstalling
    keep: true

## Controller metrics endpoint.
## Enable to expose /metrics endpoint with RBAC protection.
##
metrics:
    enable: true
    # Enable to use Prometheus ServiceMonitor
    secure: false
    # Metrics server port
    port: 8080

## Cert-manager integration for TLS certificates.
## Required for webhook certificates and metrics endpoint certificates.
##
certManager:
    enable: true
    # Install cert-manager chart as a subchart.
    install: false

## cert-manager subchart values
##
cert-manager:
    crds:
        enabled: true

## Webhook server configuration
##
webhook:
    enable: true
    # Webhook server port
    port: 9443

## Prometheus ServiceMonitor for metrics scraping.
## Requires prometheus-operator to be installed in the cluster.
##
prometheus:
    # Add annotations to allow Prometheus service discovery scrape metrics.
    scraping_annotations: false
    # Enable Prometheus ServiceMonitor for metrics scraping.
    # Requires prometheus-operator to be installed in the cluster.
    service_monitor: false
